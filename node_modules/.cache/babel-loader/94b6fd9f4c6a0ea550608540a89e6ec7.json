{"ast":null,"code":"import _slicedToArray from\"C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import'./charInfo.scss';import MarvelService from'../../services/MarvelService';import Spinner from'../spinner/Spinner';import ErrorMessage from'../errorMessage/ErrorMessage';import Skeleton from'../skeleton/Skeleton';import ImgObjFit from'../blocks/imgObjectFit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CharInfo=function CharInfo(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),char=_useState2[0],setChar=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// static getDerivedStateFromError(error) {\n//     return {error: true}\n// }\nvar marvelService=new MarvelService();useEffect(function(){updateChar();},[]);useEffect(function(){updateChar();},[props.charId]);var updateChar=function updateChar(){var charId=props.charId;if(!charId){return;}onCharLoading();marvelService.getCharacter(charId).then(onCharLoaded).catch(onError);};var onCharLoaded=function onCharLoaded(char){setChar(char);setLoading(false);};var onCharLoading=function onCharLoading(){setLoading(true);};var onError=function onError(){setLoading(false);setError(true);};var skeleton=char||loading||error?null:/*#__PURE__*/_jsx(Skeleton,{});var errorMessage=error?/*#__PURE__*/_jsx(ErrorMessage,{}):null;var spinner=loading?/*#__PURE__*/_jsx(Spinner,{}):null;var content=!(loading||error||!char)?/*#__PURE__*/_jsx(View,{char:char}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"char__info\",children:[skeleton,errorMessage,spinner,content]});};var View=function View(_ref){var char=_ref.char;var name=char.name,description=char.description,homepage=char.homepage,wiki=char.wiki,comics=char.comics;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"char__basics\",children:[/*#__PURE__*/_jsx(ImgObjFit,{char:char}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"char__info-name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"char__btns\",children:[/*#__PURE__*/_jsx(\"a\",{href:homepage,className:\"button button__main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"homepage\"})}),/*#__PURE__*/_jsx(\"a\",{href:wiki,className:\"button button__secondary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"Wiki\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"char__descr\",children:description}),/*#__PURE__*/_jsx(\"div\",{className:\"char__comics\",children:\"Comics:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"char__comics-list\",children:[comics.length>0?null:'There is no comics this character',comics.map(function(item,i){// eslint-disable-next-line\nif(i>9)return;return/*#__PURE__*/_jsx(\"li\",{className:\"char__comics-item\",children:item.name},i);})]})]});};export default CharInfo;","map":{"version":3,"sources":["C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/src/components/charInfo/CharInfo.js"],"names":["useEffect","useState","MarvelService","Spinner","ErrorMessage","Skeleton","ImgObjFit","CharInfo","props","char","setChar","loading","setLoading","error","setError","marvelService","updateChar","charId","onCharLoading","getCharacter","then","onCharLoaded","catch","onError","skeleton","errorMessage","spinner","content","View","name","description","homepage","wiki","comics","length","map","item","i"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './charInfo.scss';\r\nimport MarvelService from '../../services/MarvelService';\r\nimport Spinner from '../spinner/Spinner';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\nimport Skeleton from '../skeleton/Skeleton';\r\nimport ImgObjFit from '../blocks/imgObjectFit';\r\n\r\n\r\n\r\nconst CharInfo = (props) => {\r\n\r\n    const [char, setChar] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(false);\r\n\r\n    // static getDerivedStateFromError(error) {\r\n    //     return {error: true}\r\n    // }\r\n\r\n    const marvelService = new MarvelService();\r\n\r\n    useEffect(() => {\r\n        updateChar();\r\n    },[])\r\n\r\n    useEffect(() => {\r\n        updateChar();\r\n    },[props.charId])\r\n\r\n   const updateChar = () => {\r\n        const {charId} = props;\r\n        if (!charId) {\r\n            return;\r\n        }\r\n\r\n        onCharLoading();\r\n\r\n        marvelService\r\n            .getCharacter(charId)\r\n            .then(onCharLoaded)\r\n            .catch(onError)\r\n    }\r\n\r\n   const onCharLoaded = (char) => {\r\n        setChar(char);\r\n        setLoading(false);\r\n    }\r\n\r\n    const onCharLoading = () => {\r\n        setLoading(true);\r\n    }\r\n\r\n    const onError = () => {\r\n        setLoading(false);\r\n        setError(true);\r\n    }\r\n\r\n    const skeleton = char || loading || error ? null : <Skeleton/>; \r\n    const errorMessage = error ? <ErrorMessage/> : null;\r\n    const spinner = loading ? <Spinner/> : null;\r\n    const content = !(loading || error  || !char) ? <View char={char}/> : null;\r\n\r\n    return (\r\n        <div className=\"char__info\">\r\n            {skeleton}\r\n            {errorMessage}\r\n            {spinner}\r\n            {content}        \r\n        </div>\r\n    )\r\n}\r\n\r\nconst View = ({char}) => {\r\n    const {name, description, homepage, wiki, comics} = char;\r\n    return (\r\n        <>\r\n            <div className=\"char__basics\">\r\n                <ImgObjFit char={char}/>\r\n                {/* <img src={thumbnail} alt={name}/> */}\r\n                <div>\r\n                    <div className=\"char__info-name\">{name}</div>\r\n                    <div className=\"char__btns\">\r\n                        <a href={homepage} className=\"button button__main\">\r\n                            <div className=\"inner\">homepage</div>\r\n                        </a>\r\n                        <a href={wiki} className=\"button button__secondary\">\r\n                            <div className=\"inner\">Wiki</div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"char__descr\">\r\n                {description}\r\n            </div>\r\n            <div className=\"char__comics\">Comics:</div>\r\n            <ul className=\"char__comics-list\">\r\n                {comics.length > 0 ? null : 'There is no comics this character'}\r\n                {\r\n                    comics.map((item, i) => {\r\n                        // eslint-disable-next-line\r\n                        if (i > 9) return;\r\n                        return (\r\n                            <li key={i} className=\"char__comics-item\">\r\n                                {item.name}\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n\r\nCharInfo.propTypes = {\r\n    charId: PropTypes.number\r\n}\r\n\r\nexport default CharInfo;"]},"metadata":{},"sourceType":"module"}