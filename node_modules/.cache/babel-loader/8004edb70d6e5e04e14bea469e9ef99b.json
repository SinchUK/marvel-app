{"ast":null,"code":"import _classCallCheck from\"C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from'react';import'./charInfo.scss';import MarvelService from'../../services/MarvelService';import Spinner from'../spinner/Spinner';import ErrorMessage from'../errorMessage/ErrorMessage';import Skeleton from'../skeleton/Skeleton';import ImgObjFit from'../blocks/imgObjectFit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CharInfo=/*#__PURE__*/function(_Component){_inherits(CharInfo,_Component);var _super=_createSuper(CharInfo);function CharInfo(){var _this;_classCallCheck(this,CharInfo);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={char:null,loading:false,error:false};_this.marvelService=new MarvelService();_this.updateChar=function(){var charId=_this.props.charId;if(!charId){return;}_this.onCharLoading();_this.marvelService.getCharacter(charId).then(_this.onCharLoaded).catch(_this.onError);};_this.onCharLoaded=function(char){_this.setState({char:char,loading:false});};_this.onCharLoading=function(){_this.setState({loading:true});};_this.onError=function(){_this.setState({loading:false,error:true});};return _this;}_createClass(CharInfo,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateChar();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.charId!==prevProps.charId){this.updateChar();}}},{key:\"render\",value:function render(){var _this$state=this.state,char=_this$state.char,loading=_this$state.loading,error=_this$state.error;var skeleton=char||loading||error?null:/*#__PURE__*/_jsx(Skeleton,{});var errorMessage=error?/*#__PURE__*/_jsx(ErrorMessage,{}):null;var spinner=loading?/*#__PURE__*/_jsx(Spinner,{}):null;var content=!(loading||error||!char)?/*#__PURE__*/_jsx(View,{char:char}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"char__info\",children:[skeleton,errorMessage,spinner,content]});}}]);return CharInfo;}(Component);var View=function View(_ref){var char=_ref.char;var name=char.name,description=char.description,homepage=char.homepage,wiki=char.wiki,comics=char.comics;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"char__basics\",children:[/*#__PURE__*/_jsx(ImgObjFit,{char:char}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"char__info-name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"char__btns\",children:[/*#__PURE__*/_jsx(\"a\",{href:homepage,className:\"button button__main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"homepage\"})}),/*#__PURE__*/_jsx(\"a\",{href:wiki,className:\"button button__secondary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"Wiki\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"char__descr\",children:description}),/*#__PURE__*/_jsx(\"div\",{className:\"char__comics\",children:\"Comics:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"char__comics-list\",children:[comics.length>0?null:'There is no comics this character',comics.map(function(item,i){// eslint-disable-next-line\nif(i>9)return;return/*#__PURE__*/_jsx(\"li\",{className:\"char__comics-item\",children:item.name},i);})]})]});};export default CharInfo;","map":{"version":3,"sources":["C:/DiskA/Frontend/Udemy2021Tasks/Projects/React/marvel/marvel-app/src/components/charInfo/CharInfo.js"],"names":["Component","MarvelService","Spinner","ErrorMessage","Skeleton","ImgObjFit","CharInfo","state","char","loading","error","marvelService","updateChar","charId","props","onCharLoading","getCharacter","then","onCharLoaded","catch","onError","setState","prevProps","skeleton","errorMessage","spinner","content","View","name","description","homepage","wiki","comics","length","map","item","i"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './charInfo.scss';\r\nimport MarvelService from '../../services/MarvelService';\r\nimport Spinner from '../spinner/Spinner';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\nimport Skeleton from '../skeleton/Skeleton';\r\nimport ImgObjFit from '../blocks/imgObjectFit';\r\n\r\n\r\n\r\nclass CharInfo extends Component {\r\n    state = {\r\n        char: null,\r\n        loading: false,\r\n        error: false\r\n    }\r\n\r\n    // static getDerivedStateFromError(error) {\r\n    //     return {error: true}\r\n    // }\r\n\r\n    marvelService = new MarvelService();\r\n\r\n    componentDidMount() {\r\n        this.updateChar();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.charId !== prevProps.charId) {\r\n            this.updateChar();\r\n        }\r\n    }\r\n\r\n\r\n    updateChar = () => {\r\n        const {charId} = this.props;\r\n        if (!charId) {\r\n            return;\r\n        }\r\n\r\n        this.onCharLoading();\r\n\r\n        this.marvelService\r\n            .getCharacter(charId)\r\n            .then(this.onCharLoaded)\r\n            .catch(this.onError)\r\n    }\r\n\r\n    onCharLoaded = (char) => {\r\n        this.setState({\r\n            char, \r\n            loading: false\r\n        });\r\n    }\r\n\r\n    onCharLoading = () => {\r\n        this.setState({\r\n            loading: true\r\n        })\r\n    }\r\n\r\n    onError = () => {\r\n        this.setState({\r\n            loading: false,\r\n            error: true\r\n        })\r\n    }\r\n\r\n    render () {\r\n        const {char, loading, error} = this.state;\r\n\r\n        const skeleton = char || loading || error ? null : <Skeleton/>; \r\n        const errorMessage = error ? <ErrorMessage/> : null;\r\n        const spinner = loading ? <Spinner/> : null;\r\n        const content = !(loading || error  || !char) ? <View char={char}/> : null;\r\n\r\n        return (\r\n            <div className=\"char__info\">\r\n                {skeleton}\r\n                {errorMessage}\r\n                {spinner}\r\n                {content}        \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst View = ({char}) => {\r\n    const {name, description, homepage, wiki, comics} = char;\r\n    return (\r\n        <>\r\n            <div className=\"char__basics\">\r\n                <ImgObjFit char={char}/>\r\n                {/* <img src={thumbnail} alt={name}/> */}\r\n                <div>\r\n                    <div className=\"char__info-name\">{name}</div>\r\n                    <div className=\"char__btns\">\r\n                        <a href={homepage} className=\"button button__main\">\r\n                            <div className=\"inner\">homepage</div>\r\n                        </a>\r\n                        <a href={wiki} className=\"button button__secondary\">\r\n                            <div className=\"inner\">Wiki</div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"char__descr\">\r\n                {description}\r\n            </div>\r\n            <div className=\"char__comics\">Comics:</div>\r\n            <ul className=\"char__comics-list\">\r\n                {comics.length > 0 ? null : 'There is no comics this character'}\r\n                {\r\n                    comics.map((item, i) => {\r\n                        // eslint-disable-next-line\r\n                        if (i > 9) return;\r\n                        return (\r\n                            <li key={i} className=\"char__comics-item\">\r\n                                {item.name}\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n\r\nCharInfo.propTypes = {\r\n    charId: PropTypes.number\r\n}\r\n\r\nexport default CharInfo;"]},"metadata":{},"sourceType":"module"}