"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[193],{519:function(e,n,t){var r=t(392),a=t(184);n.Z=function(){return(0,a.jsx)("img",{style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"},src:r,alt:"error img"})}},193:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var r=t(885),a=t(304),c=t(280),i=t(394),o=t(519),s=t(184),l=function(e){var n=e.char.thumbnail;return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===n||"http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif"===n?(0,s.jsx)("img",{src:n,alt:"Random character",style:{objectFit:"contain"},className:"randomchar__img"}):(0,s.jsx)("img",{src:n,alt:"Random character",className:"randomchar__img"})},u=t(791),d=function(e){var n=e.char,t=n.name,r=n.description,a=n.homepage,c=n.wiki;return(0,s.jsxs)("div",{className:"randomchar__block",children:[(0,s.jsx)(l,{char:n}),(0,s.jsxs)("div",{className:"randomchar__info",children:[(0,s.jsx)("p",{className:"randomchar__name",children:t}),(0,s.jsx)("p",{className:"randomchar__descr",children:r}),(0,s.jsxs)("div",{className:"randomchar__btns",children:[(0,s.jsx)("a",{href:a,className:"button button__main",children:(0,s.jsx)("div",{className:"inner",children:"homepage"})}),(0,s.jsx)("a",{href:c,className:"button button__secondary",children:(0,s.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},h=function(){var e=(0,u.useState)({}),n=(0,r.Z)(e,2),t=n[0],l=n[1],h=(0,a.Z)(),f=h.loading,m=h.error,p=h.getCharacter,v=h.clearError;(0,u.useEffect)((function(){b();var e=setInterval(b,6e4);return function(){clearInterval(e)}}),[]);var x=function(e){l(e)},b=function(){v();var e=Math.floor(400*Math.random()+1011e3);p(e).then(x)},j=m?(0,s.jsx)(o.Z,{}):null,_=f?(0,s.jsx)(i.Z,{}):null,y=f||m?null:(0,s.jsx)(d,{char:t});return(0,s.jsxs)("div",{className:"randomchar",children:[j,_,y,(0,s.jsxs)("div",{className:"randomchar__static",children:[(0,s.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,s.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,s.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,s.jsx)("button",{className:"button button__main",children:(0,s.jsx)("div",{className:"inner",onClick:b,children:"try it"})}),(0,s.jsx)("img",{src:c,alt:"mjolnir",className:"randomchar__decoration"})]})]})},f=t(982),m=t(660),p=t(295),v=function(e){var n=(0,u.useState)(null),t=(0,r.Z)(n,2),a=t[0],c=t[1],i=(0,u.useState)(!1),o=(0,r.Z)(i,2),d=o[0],h=o[1],f=(0,u.useRef)([]);return e.charlist.map((function(n,t){var r=n.id,i=n.name,o="char__item";return r===a&&d&&(o+=" char__item_selected"),(0,s.jsx)(p.Z,{in:!0,timeout:300,classNames:"char__item",children:(0,s.jsxs)("li",{className:o,ref:function(e){return f.current[t]=e},onClick:function(){e.onCharSelected(r),function(e,n){c(e),h(!0)}(r)},tabIndex:"0",onKeyPress:function(n){" "!==n.key&&"Enter"!==n.key||(e.onCharSelected(r),function(e){f.current.forEach((function(e){return e.classList.remove("char__item_selected")})),f.current[e].classList.add("char__item_selected"),f.current[e].focus()}(t))},children:[(0,s.jsx)(l,{char:n,alt:i}),(0,s.jsx)("div",{className:"char__name",children:i})]},r)},r)}))},x=function(e){var n=(0,u.useState)([]),t=(0,r.Z)(n,2),c=t[0],l=t[1],d=(0,u.useState)(!1),h=(0,r.Z)(d,2),p=h[0],x=h[1],b=(0,u.useState)(1541),j=(0,r.Z)(b,2),_=j[0],y=j[1],g=(0,u.useState)(!1),k=(0,r.Z)(g,2),N=k[0],Z=k[1],E=(0,a.Z)(),w=E.loading,C=E.error,S=E.getAllCharacters;(0,u.useEffect)((function(){O(_,!0)}),[]);var O=function(e,n){x(!n),S(e).then(R)},R=function(e){var n=!1;e.length<9&&(n=!0),l((function(n){return[].concat((0,f.Z)(c),(0,f.Z)(e))})),x((function(e){return!1})),y((function(e){return e+9})),Z((function(e){return n}))},P=w&&!p?(0,s.jsx)(i.Z,{}):null,F=C?(0,s.jsx)(o.Z,{}):null;return(0,s.jsxs)("div",{className:"char__list",children:[(0,s.jsxs)("div",{className:"char__loading",children:[F,P]}),(0,s.jsx)("ul",{className:"char__grid",children:(0,s.jsx)(m.Z,{component:null,children:(0,s.jsx)(v,{onCharSelected:e.onCharSelected,charlist:c})})}),(0,s.jsx)("button",{className:"button button__main button__long",onClick:function(){return O(_)},disabled:p,style:{display:N?"none":"block"},children:(0,s.jsx)("div",{className:"inner",children:"load more"})})]})},b=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,s.jsxs)("div",{className:"skeleton",children:[(0,s.jsxs)("div",{className:"pulse skeleton__header",children:[(0,s.jsx)("div",{className:"pulse skeleton__circle"}),(0,s.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,s.jsx)("div",{className:"pulse skeleton__block"}),(0,s.jsx)("div",{className:"pulse skeleton__block"}),(0,s.jsx)("div",{className:"pulse skeleton__block"})]})]})},j=t(504),_=function(e){var n=e.char,t=n.name,r=n.description,a=n.homepage,c=n.wiki,i=n.comics;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"char__basics",children:[(0,s.jsx)(l,{char:n}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"char__info-name",children:t}),(0,s.jsxs)("div",{className:"char__btns",children:[(0,s.jsx)("a",{href:a,className:"button button__main",children:(0,s.jsx)("div",{className:"inner",children:"homepage"})}),(0,s.jsx)("a",{href:c,className:"button button__secondary",children:(0,s.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,s.jsx)("div",{className:"char__descr",children:r}),(0,s.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,s.jsxs)("ul",{className:"char__comics-list",children:[i.length>0?null:"There is no comics this character",i.map((function(e,n){var t=e.resourceURI.slice(43);if(!(n>9))return(0,s.jsx)("li",{className:"char__comics-item",onClick:function(){},children:(0,s.jsx)(j.rU,{to:"/comics/".concat(t),children:e.name})},n)}))]})]})},y=function(e){var n=(0,u.useState)(null),t=(0,r.Z)(n,2),c=t[0],l=t[1],d=(0,a.Z)(),h=d.loading,f=d.error,m=d.getCharacter,p=d.clearError;(0,u.useEffect)((function(){v()}),[e.charId]);var v=function(){var n=e.charId;n&&(p(),m(n).then(x))},x=function(e){l(e)},j=c||h||f?null:(0,s.jsx)(b,{}),y=f?(0,s.jsx)(o.Z,{}):null,g=h?(0,s.jsx)(i.Z,{}):null,k=h||f||!c?null:(0,s.jsx)(_,{char:c});return(0,s.jsxs)("div",{className:"char__info",children:[j,y,g,k]})};function g(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function k(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=t(611);function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}var w=t(326);function C(e,n){if(n&&("object"===E(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,w.Z)(e)}function S(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Z(e);if(n){var a=Z(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return C(this,t)}}var O=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&(0,N.Z)(e,n)}(c,e);var n,t,r,a=S(c);function c(){var e;g(this,c);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(e=a.call.apply(a,[this].concat(t))).state={error:!1},e}return n=c,(t=[{key:"componentDidCatch",value:function(e,n){console.log(e,n),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,s.jsx)(o.Z,{}):this.props.children}}])&&k(n.prototype,t),r&&k(n,r),Object.defineProperty(n,"prototype",{writable:!1}),c}(u.Component),R=O,P=t(610),F=function(){var e=(0,u.useState)(null),n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R,{children:(0,s.jsx)(h,{})}),(0,s.jsxs)("div",{className:"char__content",children:[(0,s.jsx)(R,{children:(0,s.jsx)(x,{onCharSelected:function(e){a(e)}})}),(0,s.jsx)(R,{children:(0,s.jsx)(y,{charId:t})})]}),(0,s.jsx)("img",{className:"bg-decoration",src:P,alt:"vision"})]})}},304:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(861),a=t(687),c=t.n(a),i=t(885),o=t(791),s=function(){var e=function(){var e=(0,o.useState)(!1),n=(0,i.Z)(e,2),t=n[0],a=n[1],s=(0,o.useState)(null),l=(0,i.Z)(s,2),u=l[0],d=l[1],h=(0,o.useCallback)(function(){var e=(0,r.Z)(c().mark((function e(n){var t,r,i,o,s,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,i=l.length>3&&void 0!==l[3]?l[3]:{"Content-type":"application/json"},a(!0),e.prev=4,e.next=7,fetch(n,{method:t,body:r,headers:i});case 7:if((o=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(n,", status: ").concat(o.status));case 10:return e.next=12,o.json();case 12:return s=e.sent,a(!1),e.abrupt("return",s);case 17:throw e.prev=17,e.t0=e.catch(4),a(!1),d(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(n){return e.apply(this,arguments)}}(),[]);return{loading:t,request:h,error:u,clearError:(0,o.useCallback)((function(){return d(null)}),[])}}(),n=e.loading,t=e.request,a=e.error,s=e.clearError,l="https://gateway.marvel.com:443/v1/public/",u="ecbc50ab1d1d150b779bd5f2481d19e0",d=function(){var e=(0,r.Z)(c().mark((function e(){var n,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,t("".concat(l,"comics?limit=8&offset=").concat(n,"&apikey=").concat(u));case 3:return r=e.sent,e.abrupt("return",r.data.results.map(p));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)(c().mark((function e(n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"comics/").concat(n,"?apikey=").concat(u));case 2:return r=e.sent,e.abrupt("return",p(r.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(c().mark((function e(){var n,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:210,e.next=3,t("".concat(l,"characters?limit=9&offset=").concat(n,"&apikey=").concat(u));case 3:return r=e.sent,e.abrupt("return",r.data.results.map(v));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(c().mark((function e(n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters/").concat(n,"?apikey=").concat(u));case 2:return r=e.sent,e.abrupt("return",v(r.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(e){var n;return{id:e.id,title:e.title,price:0===e.prices[0].price?"Not available":e.prices[0].price+"$",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,url:e.urls[0].url,pageCount:e.pageCount||"No information about the number of pages",language:null!==(n=e.textObjects)&&void 0!==n&&n.length?e.textObjects[0].language:"en-us",description:e.description||"There is no description"}},v=function(e){return{id:e.id,name:e.name,description:e.description?"".concat(e.description.slice(0,210),"..."):"There is no description for this character...",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}};return{loading:n,error:a,getAllCharacters:f,getCharacter:m,clearError:s,getAllComics:d,getComic:h}}},660:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(366),a=t(462),c=t(326),i=t(578),o=t(791),s=t(545);function l(e,n){var t=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return n&&(0,o.isValidElement)(e)?n(e):e}(e)})),t}function u(e,n,t){return null!=t[n]?t[n]:e.props[n]}function d(e,n,t){var r=l(e.children),a=function(e,n){function t(t){return t in n?n[t]:e[t]}e=e||{},n=n||{};var r,a=Object.create(null),c=[];for(var i in e)i in n?c.length&&(a[i]=c,c=[]):c.push(i);var o={};for(var s in n){if(a[s])for(r=0;r<a[s].length;r++){var l=a[s][r];o[a[s][r]]=t(l)}o[s]=t(s)}for(r=0;r<c.length;r++)o[c[r]]=t(c[r]);return o}(n,r);return Object.keys(a).forEach((function(c){var i=a[c];if((0,o.isValidElement)(i)){var s=c in n,l=c in r,d=n[c],h=(0,o.isValidElement)(d)&&!d.props.in;!l||s&&!h?l||!s||h?l&&s&&(0,o.isValidElement)(d)&&(a[c]=(0,o.cloneElement)(i,{onExited:t.bind(null,i),in:d.props.in,exit:u(i,"exit",e),enter:u(i,"enter",e)})):a[c]=(0,o.cloneElement)(i,{in:!1}):a[c]=(0,o.cloneElement)(i,{onExited:t.bind(null,i),in:!0,exit:u(i,"exit",e),enter:u(i,"enter",e)})}})),a}var h=Object.values||function(e){return Object.keys(e).map((function(n){return e[n]}))},f=function(e){function n(n,t){var r,a=(r=e.call(this,n,t)||this).handleExited.bind((0,c.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}(0,i.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var t,r,a=n.children,c=n.handleExited;return{children:n.firstRender?(t=e,r=c,l(t.children,(function(e){return(0,o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:u(e,"appear",t),enter:u(e,"enter",t),exit:u(e,"exit",t)})}))):d(e,a,c),firstRender:!1}},t.handleExited=function(e,n){var t=l(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(n),this.mounted&&this.setState((function(n){var t=(0,a.Z)({},n.children);return delete t[e.key],{children:t}})))},t.render=function(){var e=this.props,n=e.component,t=e.childFactory,a=(0,r.Z)(e,["component","childFactory"]),c=this.state.contextValue,i=h(this.state.children).map(t);return delete a.appear,delete a.enter,delete a.exit,null===n?o.createElement(s.Z.Provider,{value:c},i):o.createElement(s.Z.Provider,{value:c},o.createElement(n,a,i))},n}(o.Component);f.propTypes={},f.defaultProps={component:"div",childFactory:function(e){return e}};var m=f},392:function(e,n,t){e.exports=t.p+"static/media/error.42292aa12b6bc303ce99.gif"},280:function(e,n,t){e.exports=t.p+"static/media/mjolnir.61f31e1809f12183a524.png"},610:function(e,n,t){e.exports=t.p+"static/media/vision.067d4ae1936d64a577ce.png"},326:function(e,n,t){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},982:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(907);var a=t(181);function c(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=193.aafde15e.chunk.js.map